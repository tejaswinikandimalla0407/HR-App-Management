graph TB
    %% =============================================================================
    %% HR MANAGEMENT SYSTEM - IMPLEMENTED FUNCTIONS MICROSERVICES ARCHITECTURE
    %% Based on your current server.js implementation
    %% =============================================================================
    
    %% Frontend Applications (Your Current HTML Pages)
    subgraph "ğŸŒ Frontend Applications"
        direction TB
        
        subgraph "Employee Portal Pages"
            LOGIN[login.html<br/>ğŸ“ Employee Login]
            SIGNUP[signup.html<br/>ğŸ‘¤ Employee Registration]
            DASH[dashboard.html<br/>ğŸ  Employee Dashboard]
            LEAVE_APPLY[apply_leave.html<br/>ğŸ–ï¸ Apply for Leave]
            LEAVE_BAL[leave_balance.html<br/>ğŸ’° View Leave Balance]
            ATTEND[attendance.html<br/>â° Check-in/Check-out]
            GRIEV[grievance.html<br/>ğŸ“¢ Submit Grievance]
            HIRE_FEED[hiring_process.html<br/>ğŸ’¼ Hiring Feedback]
        end
        
        subgraph "Admin Portal Pages"
            ADMIN_LOGIN[admin-login.html<br/>ğŸ‘¨â€ğŸ’¼ Admin Login]
            ADMIN_DASH[admin-dashboard.html<br/>ğŸ“Š Admin Dashboard]
            ADMIN_EMP[admin-employees.html<br/>ğŸ‘¥ Employee Management]
            ADMIN_LEAVE[admin-leaves.html<br/>âœ… Leave Approvals]
            ADMIN_ATT[admin-attendance.html<br/>ğŸ“ˆ Attendance Reports]
            ADMIN_GRIEV[admin-grievances.html<br/>ğŸ’¬ Grievance Management]
        end
    end

    %% API Gateway (Your Current Express Server)
    subgraph "ğŸšª API Gateway Layer"
        GATEWAY[Express.js Server<br/>Port: 3000<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Route Management<br/>ğŸ“ Static File Serving<br/>ğŸ”— MongoDB Connection<br/>ğŸ“Š Request Processing<br/>ğŸŒ CORS Handling]
    end

    %% Microservices (Based on Your Implemented APIs)
    subgraph "ğŸ”§ Microservices Layer"
        direction TB
        
        subgraph "Authentication & User Management"
            AUTH_SERVICE[ğŸ” Authentication Service<br/>Port: 3001<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/login<br/>â€¢ POST /api/signup<br/>â€¢ POST /api/admin/login<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ”‘ Employee Login/Signup<br/>ğŸ‘¨â€ğŸ’¼ Admin Authentication<br/>ğŸ“± Basic Auth (no JWT)<br/>ğŸ”’ Password Validation<br/>ğŸ‘¥ User Registration]
        end
        
        subgraph "Employee Management"
            EMP_SERVICE[ğŸ‘¥ Employee Service<br/>Port: 3002<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ GET /api/admin/employees<br/>â€¢ PUT /api/admin/employees/:id<br/>â€¢ DELETE /api/admin/employees/:id<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ‘¤ Employee CRUD Operations<br/>ğŸ“ Profile Management<br/>ğŸ” Employee Listing<br/>âœï¸ Employee Updates<br/>âŒ Employee Deletion<br/>ğŸ›¡ï¸ Password Protection]
        end
        
        subgraph "Leave Management"
            LEAVE_SERVICE[ğŸ–ï¸ Leave Service<br/>Port: 3003<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/leave/apply<br/>â€¢ GET /api/leave/balance/:empId<br/>â€¢ GET /api/leave/history/:empId<br/>â€¢ GET /api/admin/leaves<br/>â€¢ PUT /api/admin/leaves/:id<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ“‹ Leave Application<br/>ğŸ’° Leave Balance Calculation<br/>ğŸ“ˆ Leave History Tracking<br/>âœ… Admin Leave Approvals<br/>ğŸ“Š Leave Request Analytics<br/>ğŸ”„ Status Updates]
        end
        
        subgraph "Attendance Management"
            ATT_SERVICE[â° Attendance Service<br/>Port: 3004<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/attendance/checkin<br/>â€¢ POST /api/attendance/checkout<br/>â€¢ POST /api/attendance/today<br/>â€¢ GET /api/admin/attendance<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>âœ… Employee Check-in/out<br/>â±ï¸ Time Tracking<br/>ğŸ“ˆ Attendance Reports<br/>ğŸ“… Today's Status Check<br/>ğŸ‘¨â€ğŸ’¼ Admin Attendance View<br/>ğŸ“Š Attendance Analytics]
        end
        
        subgraph "Grievance Management"
            GRIEV_SERVICE[ğŸ“¢ Grievance Service<br/>Port: 3005<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/grievance<br/>â€¢ GET /api/admin/grievances<br/>â€¢ PUT /api/admin/grievances/:id<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ“ Grievance Submission<br/>ğŸ“‹ Status Tracking<br/>ğŸ’¬ Admin Responses<br/>ğŸ” Grievance Listing<br/>âš ï¸ Issue Management<br/>ğŸ•’ Timestamp Tracking]
        end
        
        subgraph "Analytics & Reporting"
            ANALYTICS_SERVICE[ğŸ“Š Analytics Service<br/>Port: 3006<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ GET /api/admin/analytics<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ“ˆ HR Dashboard Metrics<br/>ğŸ“Š Employee Statistics<br/>ğŸ“‰ Monthly Leave Trends<br/>ğŸ“„ Attendance Reports<br/>ğŸ’¼ Overall HR Analytics<br/>ğŸ”¢ Data Aggregation]
        end
        
        subgraph "HR Chatbot"
            CHAT_SERVICE[ğŸ¤– Chatbot Service<br/>Port: 3007<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/chatbot<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ§  HR Knowledge Base<br/>ğŸ’¬ Query Processing<br/>ğŸ“š Policy Information<br/>ğŸ“ Chat Logging<br/>ğŸ¯ Context Recognition<br/>ğŸ” Help System]
        end
        
        subgraph "Hiring Management"
            HIRING_SERVICE[ğŸ¢ Hiring Service<br/>Port: 3008<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented APIs:<br/>â€¢ POST /api/hiring/feedback<br/>â€¢ GET /api/admin/hiring<br/>â€¢ POST /api/admin/jobs<br/>â€¢ GET /api/jobs<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Features:<br/>ğŸ’¼ Job Posting Management<br/>ğŸ“ Hiring Feedback Collection<br/>ğŸ¯ Recruitment Process<br/>ğŸ“Š Hiring Analytics<br/>ğŸ‘¥ Candidate Management<br/>ğŸ’¡ Feedback Processing]
        end
    end

    %% Database Layer (Your Current MongoDB Setup)
    subgraph "ğŸ’¾ Database Architecture"
        direction TB
        
        subgraph "Current Monolithic Database"
            CURRENT_DB[(ğŸ—„ï¸ hr_system (MongoDB)<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Current Collections:<br/>â€¢ employees (login, profiles)<br/>â€¢ hr_admins (admin users)<br/>â€¢ leave_requests (leave data)<br/>â€¢ attendance (check-in/out)<br/>â€¢ grievances (complaints)<br/>â€¢ hiring_feedback (feedback)<br/>â€¢ chat_logs (chatbot data)<br/>â€¢ job_postings (job ads)<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Single database for all data)]
        end
        
        subgraph "Target Microservices Databases"
            AUTH_DB[(ğŸ” auth_db<br/>â€¢ employees<br/>â€¢ hr_admins<br/>â€¢ user_sessions)]
            
            EMP_DB[(ğŸ‘¥ employee_db<br/>â€¢ employee_profiles<br/>â€¢ departments<br/>â€¢ employee_roles)]
            
            LEAVE_DB[(ğŸ–ï¸ leave_db<br/>â€¢ leave_requests<br/>â€¢ leave_balances<br/>â€¢ leave_policies)]
            
            ATT_DB[(â° attendance_db<br/>â€¢ attendance_logs<br/>â€¢ work_schedules<br/>â€¢ time_tracking)]
            
            GRIEV_DB[(ğŸ“¢ grievance_db<br/>â€¢ grievances<br/>â€¢ admin_responses<br/>â€¢ escalation_logs)]
            
            ANALYTICS_DB[(ğŸ“Š analytics_db<br/>â€¢ hr_metrics<br/>â€¢ generated_reports<br/>â€¢ dashboard_data)]
            
            CHAT_DB[(ğŸ¤– chatbot_db<br/>â€¢ chat_logs<br/>â€¢ knowledge_base<br/>â€¢ conversation_history)]
            
            HIRE_DB[(ğŸ¢ hiring_db<br/>â€¢ job_postings<br/>â€¢ hiring_feedback<br/>â€¢ recruitment_data)]
        end
    end

    %% Your Implemented API Endpoints
    subgraph "ğŸ”Œ Implemented API Endpoints"
        direction TB
        
        subgraph "Employee APIs (Implemented)"
            EMP_APIS[Employee Endpoints<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Authentication:<br/>â€¢ POST /api/signup<br/>â€¢ POST /api/login<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Leave Management:<br/>â€¢ POST /api/leave/apply<br/>â€¢ GET /api/leave/balance/:empId<br/>â€¢ GET /api/leave/history/:empId<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Attendance:<br/>â€¢ POST /api/attendance/checkin<br/>â€¢ POST /api/attendance/checkout<br/>â€¢ POST /api/attendance/today<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Other Services:<br/>â€¢ POST /api/grievance<br/>â€¢ POST /api/hiring/feedback<br/>â€¢ POST /api/chatbot<br/>â€¢ GET /api/jobs]
        end
        
        subgraph "Admin APIs (Implemented)"
            ADMIN_APIS[Admin Endpoints<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Authentication:<br/>â€¢ POST /api/admin/login<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Employee Management:<br/>â€¢ GET /api/admin/employees<br/>â€¢ PUT /api/admin/employees/:id<br/>â€¢ DELETE /api/admin/employees/:id<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Leave Management:<br/>â€¢ GET /api/admin/leaves<br/>â€¢ PUT /api/admin/leaves/:id<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Other Admin Functions:<br/>â€¢ GET /api/admin/attendance<br/>â€¢ GET /api/admin/grievances<br/>â€¢ PUT /api/admin/grievances/:id<br/>â€¢ GET /api/admin/analytics<br/>â€¢ GET /api/admin/hiring<br/>â€¢ POST /api/admin/jobs]
        end
    end

    %% HR Knowledge Base (Your Chatbot Data)
    subgraph "ğŸ§  HR Knowledge Base (Implemented)"
        KB[HR Knowledge Base<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Implemented Policies:<br/>â€¢ Leave Policy (12 CL, 10 SL, 15 AL)<br/>â€¢ Attendance Policy (9 AM - 6 PM)<br/>â€¢ Holiday Information<br/>â€¢ Grievance Procedure<br/>â€¢ Salary Policy<br/>â€¢ Dress Code Policy<br/>â€¢ Remote Work Policy<br/>â€¢ Training Programs<br/>â€¢ Performance Review<br/>â€¢ Benefits Information<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Chatbot Responses:<br/>â€¢ Context Recognition<br/>â€¢ Help System<br/>â€¢ Policy Queries<br/>â€¢ Greeting Responses]
    end

    %% ===========================
    %% CONNECTION DEFINITIONS
    %% ===========================

    %% Frontend to Gateway connections
    LOGIN --> GATEWAY
    SIGNUP --> GATEWAY
    DASH --> GATEWAY
    LEAVE_APPLY --> GATEWAY
    LEAVE_BAL --> GATEWAY
    ATTEND --> GATEWAY
    GRIEV --> GATEWAY
    HIRE_FEED --> GATEWAY
    ADMIN_LOGIN --> GATEWAY
    ADMIN_DASH --> GATEWAY
    ADMIN_EMP --> GATEWAY
    ADMIN_LEAVE --> GATEWAY
    ADMIN_ATT --> GATEWAY
    ADMIN_GRIEV --> GATEWAY

    %% Gateway to Services (Target Architecture)
    GATEWAY --> AUTH_SERVICE
    GATEWAY --> EMP_SERVICE
    GATEWAY --> LEAVE_SERVICE
    GATEWAY --> ATT_SERVICE
    GATEWAY --> GRIEV_SERVICE
    GATEWAY --> ANALYTICS_SERVICE
    GATEWAY --> CHAT_SERVICE
    GATEWAY --> HIRING_SERVICE

    %% Current Database Connections (Monolithic)
    AUTH_SERVICE -.-> CURRENT_DB
    EMP_SERVICE -.-> CURRENT_DB
    LEAVE_SERVICE -.-> CURRENT_DB
    ATT_SERVICE -.-> CURRENT_DB
    GRIEV_SERVICE -.-> CURRENT_DB
    ANALYTICS_SERVICE -.-> CURRENT_DB
    CHAT_SERVICE -.-> CURRENT_DB
    HIRING_SERVICE -.-> CURRENT_DB

    %% Target Database Connections (Microservices)
    AUTH_SERVICE --> AUTH_DB
    EMP_SERVICE --> EMP_DB
    LEAVE_SERVICE --> LEAVE_DB
    ATT_SERVICE --> ATT_DB
    GRIEV_SERVICE --> GRIEV_DB
    ANALYTICS_SERVICE --> ANALYTICS_DB
    CHAT_SERVICE --> CHAT_DB
    HIRING_SERVICE --> HIRE_DB

    %% API to Service Mapping
    EMP_APIS -.-> AUTH_SERVICE
    EMP_APIS -.-> LEAVE_SERVICE
    EMP_APIS -.-> ATT_SERVICE
    EMP_APIS -.-> GRIEV_SERVICE
    EMP_APIS -.-> CHAT_SERVICE
    EMP_APIS -.-> HIRING_SERVICE

    ADMIN_APIS -.-> AUTH_SERVICE
    ADMIN_APIS -.-> EMP_SERVICE
    ADMIN_APIS -.-> LEAVE_SERVICE
    ADMIN_APIS -.-> ATT_SERVICE
    ADMIN_APIS -.-> GRIEV_SERVICE
    ADMIN_APIS -.-> ANALYTICS_SERVICE
    ADMIN_APIS -.-> HIRING_SERVICE

    %% Chatbot Knowledge Base
    CHAT_SERVICE --> KB

    %% Inter-service Dependencies (Your Current Logic)
    LEAVE_SERVICE -.-> EMP_SERVICE
    ATT_SERVICE -.-> EMP_SERVICE
    GRIEV_SERVICE -.-> EMP_SERVICE
    ANALYTICS_SERVICE -.-> AUTH_SERVICE
    ANALYTICS_SERVICE -.-> LEAVE_SERVICE
    ANALYTICS_SERVICE -.-> ATT_SERVICE

    %% ===========================
    %% STYLING DEFINITIONS
    %% ===========================

    classDef frontendStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:2px,color:#0D47A1,font-size:11px
    classDef adminFrontendStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px,color:#4A148C,font-size:11px
    classDef gatewayStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:3px,color:#E65100,font-size:12px
    classDef authStyle fill:#FFEBEE,stroke:#D32F2F,stroke-width:2px,color:#B71C1C,font-size:11px
    classDef coreStyle fill:#E8F5E8,stroke:#388E3C,stroke-width:2px,color:#1B5E20,font-size:11px
    classDef businessStyle fill:#E1F5FE,stroke:#0288D1,stroke-width:2px,color:#01579B,font-size:11px
    classDef currentDbStyle fill:#FFCDD2,stroke:#F44336,stroke-width:3px,color:#C62828,font-size:11px
    classDef targetDbStyle fill:#FFF8E1,stroke:#FFA000,stroke-width:2px,color:#FF6F00,font-size:11px
    classDef apiStyle fill:#FCE4EC,stroke:#C2185B,stroke-width:2px,color:#880E4F,font-size:11px
    classDef kbStyle fill:#F1F8E9,stroke:#689F38,stroke-width:2px,color:#33691E,font-size:11px

    %% Apply Styles
    class LOGIN,SIGNUP,DASH,LEAVE_APPLY,LEAVE_BAL,ATTEND,GRIEV,HIRE_FEED frontendStyle
    class ADMIN_LOGIN,ADMIN_DASH,ADMIN_EMP,ADMIN_LEAVE,ADMIN_ATT,ADMIN_GRIEV adminFrontendStyle
    class GATEWAY gatewayStyle
    class AUTH_SERVICE authStyle
    class EMP_SERVICE,LEAVE_SERVICE,ATT_SERVICE coreStyle
    class GRIEV_SERVICE,ANALYTICS_SERVICE,CHAT_SERVICE,HIRING_SERVICE businessStyle
    class CURRENT_DB currentDbStyle
    class AUTH_DB,EMP_DB,LEAVE_DB,ATT_DB,GRIEV_DB,ANALYTICS_DB,CHAT_DB,HIRE_DB targetDbStyle
    class EMP_APIS,ADMIN_APIS apiStyle
    class KB kbStyle
